{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./header.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./header.component.css?ngResource\";\nimport { Component, HostListener } from '@angular/core';\nlet HeaderComponent = class HeaderComponent {\n  constructor() {\n    this.menuAbierto = false;\n    this.previousScrollPosition = window.pageYOffset;\n    this.headerVisible = true;\n    this.isNavigating = false; // Nueva bandera para evitar conflictos\n  }\n\n  toggleMenu() {\n    this.menuAbierto = !this.menuAbierto;\n    // Prevenir scroll del body cuando el menú está abierto\n    if (this.menuAbierto) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n  }\n  hideBurguer() {\n    this.menuAbierto = false;\n    document.body.style.overflow = ''; // Restaurar scroll\n  }\n\n  navigateToSection(event, sectionId) {\n    event.preventDefault();\n    event.stopPropagation(); // Evita propagación de eventos\n    // Marcar que estamos navegando\n    this.isNavigating = true;\n    // Forzar header visible durante navegación\n    this.headerVisible = true;\n    // Cerrar menú inmediatamente\n    this.hideBurguer();\n    // Navegar con timing optimizado\n    requestAnimationFrame(() => {\n      setTimeout(() => {\n        const section = document.getElementById(sectionId);\n        if (section) {\n          // Calcular offset del header\n          const headerHeight = 70; // Ajusta según tu header\n          const elementPosition = section.getBoundingClientRect().top;\n          const offsetPosition = elementPosition + window.pageYOffset - headerHeight;\n          window.scrollTo({\n            top: offsetPosition,\n            behavior: 'smooth'\n          });\n          // Liberar la bandera después de la navegación\n          setTimeout(() => {\n            this.isNavigating = false;\n          }, 1000); // Dar tiempo para que termine el scroll suave\n        }\n      }, 100); // Reducido de 200ms a 100ms\n    });\n  }\n\n  onWindowScroll() {\n    // No ocultar header si estamos navegando o el menú está abierto\n    if (this.isNavigating || this.menuAbierto) {\n      return;\n    }\n    const currentScroll = window.pageYOffset;\n    const scrollThreshold = 100;\n    const scrollDifference = Math.abs(currentScroll - this.previousScrollPosition);\n    // Solo actuar si hay un scroll significativo (evita micro-scrolls)\n    if (scrollDifference < 5) {\n      return;\n    }\n    // Lógica mejorada para mostrar/ocultar header\n    if (currentScroll > this.previousScrollPosition && currentScroll > scrollThreshold) {\n      // Scrolling hacia abajo\n      this.headerVisible = false;\n    } else if (currentScroll < this.previousScrollPosition || currentScroll <= scrollThreshold) {\n      // Scrolling hacia arriba o cerca del top\n      this.headerVisible = true;\n    }\n    this.previousScrollPosition = currentScroll;\n  }\n  onWindowResize() {\n    // Cerrar menú en resize para evitar problemas responsive\n    if (this.menuAbierto) {\n      this.hideBurguer();\n    }\n  }\n  onKeyDown(event) {\n    // Cerrar menú con ESC\n    if (event.key === 'Escape' && this.menuAbierto) {\n      this.hideBurguer();\n    }\n  }\n  onDocumentClick(event) {\n    // Cerrar menú al hacer click fuera\n    const target = event.target;\n    const menuContainer = document.querySelector('.nav-container');\n    const hamburgerBtn = document.querySelector('.hamburger-btn');\n    if (this.menuAbierto && !menuContainer?.contains(target) && !hamburgerBtn?.contains(target)) {\n      this.hideBurguer();\n    }\n  }\n  static {\n    this.propDecorators = {\n      onWindowScroll: [{\n        type: HostListener,\n        args: ['window:scroll', []]\n      }],\n      onWindowResize: [{\n        type: HostListener,\n        args: ['window:resize', []]\n      }],\n      onKeyDown: [{\n        type: HostListener,\n        args: ['document:keydown', ['$event']]\n      }],\n      onDocumentClick: [{\n        type: HostListener,\n        args: ['document:click', ['$event']]\n      }]\n    };\n  }\n};\nHeaderComponent = __decorate([Component({\n  selector: 'app-header',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HeaderComponent);\nexport { HeaderComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}